<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Super Secret Login</title>
</head>
<body>
    <h3>Enter login information:</h3>
    Username:<input id="username"><br>
    Password:<input id="password"><br>
    <button id="submitInfo" onclick="doLogin()">Login</button>

</body>

<script>

    const username = document.getElementById("username").value;
    const password = document.getElementById("password").value;

    loginJSON = {
        "username": username,
        "password": password
    }

    async function doLogin() {
        let loginInfo = {
            method:"PUT",
            headers:{'Content-Type':"application/json"},
            body: JSON.stringify(loginJSON)
        }
        const response = await fetch("http://localhost:5000/", loginInfo);
        if (response.status === 201) {
            
            const apiResponse = await response.json();
            alert(apiResponse.message);
            window.localStorage.setItem("token", apiResponse.token);
            window.location.href = "secretagentpage.html"
        } else if (response.status === 200) { 
            const apiResponse = await response.json();
            alert(apiResponse.message);
        } else {
            alert("something went wrong?");
        }
    }


</script>




</html>