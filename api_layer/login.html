<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        body {
            background-image: url("spyvsspy.jpg");
            background-repeat: no-repeat;
            background-attachment: fixed;
            color: white
        }
    </style>
    <meta charset="UTF-8">
    <title>Super Secret Login</title>
</head>
<body bgcolor="black">
    <h3>Enter login information:</h3>
    Username:<input id="username"><br>
    Password: <input id="password"><br>
    <button id="submitInfo" onclick="doLogin()">Login</button>

</body>

<script>
  
    async function doLogin() {
        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;
        loginJSON = {
            "username": username,
            "password": password
        }
        let loginInfo = {
            method:"POST",
            headers:{'Content-Type':"application/json"},
            body: JSON.stringify(loginJSON)
        }
        const response = await fetch("http://localhost:5000/login", loginInfo);
        if (response.status === 201) {
            const apiResponse = await response.json();
            alert(apiResponse.message);
            window.sessionStorage.setItem("token", apiResponse.token);
            window.location.href = "secretagentpage.html"
        } else if (response.status === 200) { 
            const apiResponse = await response.json();
            alert(apiResponse.message);
        } else {
            alert("something went wrong?");
        }
    }


</script>




</html>